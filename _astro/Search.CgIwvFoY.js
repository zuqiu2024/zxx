import{o as Pe,i as Te,s as A,r as pe}from"./props.CFp1PoRn.js";import{q as me,v as Le,f as k,a as N,t as S,g as e,e as G,b as g,p as ze,c as Ee,s as x,m as U,d as b,u as i,h as s,i as o,r as l,j as ie}from"./utils.BUOTzkNE.js";import{s as B}from"./render.DrVGAan2.js";import{i as L}from"./if.D48hGaIU.js";import{e as Re,i as Be}from"./each.YV9WMojM.js";import{I as j,h as ne}from"./Icon.C6e8Bd3Z.js";import{b as he}from"./input.CRUyF9GO.js";import{I as c}from"./zh_TW.Bl-Ke2VL.js";import{i as d}from"./translation.C9zUeTiQ.js";import"./navBarConfig.Bx7Aaq8G.js";import{u as ue,a as se}from"./url-utils.BYYtzi61.js";/* empty css                        */import"./branches.0nLXAaZu.js";function We(v,q){if(!v||typeof v!="string"){console.warn("navigateToPage: Invalid URL provided");return}if(v.startsWith("http://")||v.startsWith("https://")||v.startsWith("//")){window.open(v,"_blank");return}if(v.startsWith("#")){const r=document.getElementById(v.slice(1));r&&r.scrollIntoView({behavior:"smooth"});return}if(typeof window<"u"&&window.swup)try{q?.replace||window.swup.navigate(v)}catch(r){console.error("Swup navigation failed:",r),ge(v)}else ge(v)}function ge(v,q){window.location.href=v}var Me=k('<div class="transition first-of-type:mt-2 lg:first-of-type:mt-0 block rounded-xl text-lg px-3 py-2 text-50"> </div>'),Ve=k('<div class="transition text-sm text-50" style="display: flex; align-items: flex-start; margin-top: 0.1rem"><span style="display: inline-block; background-color: var(--btn-plain-bg-hover); color: var(--primary); padding: 0.1em 0.4em; border-radius: 5px; font-size: 0.75em; font-weight: 600; margin-right: 0.5em; flex-shrink: 0;"> </span> <div><!></div></div>'),Ce=k('<div class="transition text-sm text-30" style="display: flex; align-items: flex-start; margin-top: 0.1rem"><span style="display: inline-block; background-color: var(--btn-plain-bg-active); color: var(--primary); padding: 0.1em 0.4em; border-radius: 5px; font-size: 0.75em; font-weight: 600; margin-right: 0.5em; flex-shrink: 0;"> </span> <div><!></div></div>'),Ne=k(`<a class="transition first-of-type:mt-2 lg:first-of-type:mt-0 group block
           rounded-xl text-lg px-3 py-2 hover:bg-[var(--btn-plain-bg-hover)] active:bg-[var(--btn-plain-bg-active)]"><div class="transition text-90 inline-flex font-bold group-hover:text-[var(--primary)]"><!> <!></div> <!> <!></a>`),Ue=k('<a class="transition first-of-type:mt-2 lg:first-of-type:mt-0 group block rounded-xl text-lg px-3 py-2 hover:bg-[var(--btn-plain-bg-hover)] active:bg-[var(--btn-plain-bg-active)] text-[var(--primary)] font-bold text-center"><span class="inline-flex items-center"> <!></span></a>'),je=k("<!> <!>",1),qe=k('<div class="transition first-of-type:mt-2 lg:first-of-type:mt-0 block rounded-xl text-lg px-3 py-2 text-50"> </div>'),Fe=k('<div class="transition first-of-type:mt-2 lg:first-of-type:mt-0 block rounded-xl text-lg px-3 py-2 text-50"> </div>'),Ke=k(`<div id="search-bar" class="hidden lg:flex transition-all items-center h-11 mr-2 rounded-lg
      bg-black/[0.04] hover:bg-black/[0.06] focus-within:bg-black/[0.06]
      dark:bg-white/5 dark:hover:bg-white/10 dark:focus-within:bg-white/10
"><!> <input class="transition-all pl-10 text-sm bg-transparent outline-0
         h-full w-40 active:w-60 focus:w-60 text-black/50 dark:text-white/50 svelte-1n2o1uz"/></div> <button aria-label="Search Panel" id="search-switch" class="btn-plain scale-animation lg:!hidden rounded-lg w-11 h-11 active:scale-90"><!></button> <div id="search-panel" class="float-panel float-panel-closed search-panel absolute md:w-[30rem]
top-20 left-4 md:left-[unset] right-4 shadow-2xl rounded-2xl p-2 svelte-1n2o1uz"><div id="search-bar-inside" class="flex relative lg:hidden transition-all items-center h-11 rounded-xl
      bg-black/[0.04] hover:bg-black/[0.06] focus-within:bg-black/[0.06]
      dark:bg-white/5 dark:hover:bg-white/10 dark:focus-within:bg-white/10
  "><!> <input class="pl-10 absolute inset-0 text-sm bg-transparent outline-0
               focus:w-60 text-black/50 dark:text-white/50 svelte-1n2o1uz"/></div> <!></div>`,1);function rt(v,q){Ee(q,!1);let r=U(""),f=U(""),p=U([]),H=U(!1),z=U(!1),oe;const Ye=[{url:ue("/"),meta:{title:"This Is a Fake Search Result"},excerpt:"Because Pagefind cannot work in the <mark>dev</mark> environment."},{url:ue("/"),meta:{title:"If You Want to Test the Search"},excerpt:"Try running <mark>npm build && npm preview</mark> instead."}],be=()=>{document.getElementById("search-panel")?.classList.toggle("float-panel-closed")},J=(a,n)=>{const m=document.getElementById("search-panel");!m||n&&!e(r)||!n&&!e(f)||(a?m.classList.remove("float-panel-closed"):m.classList.add("float-panel-closed"))},xe=()=>{document.getElementById("search-panel")?.classList.add("float-panel-closed"),x(r,""),x(f,""),x(p,[])},le=(a,n)=>{a.preventDefault(),xe(),We(n)},W=async(a,n)=>{if(!a){J(!1,n),x(p,[]);return}e(z)&&(x(H,!0),clearTimeout(oe),oe=setTimeout(async()=>{try{let m=[];if(window.pagefind){const M=await window.pagefind.search(a);m=await Promise.all(M.results.map(Z=>Z.data()))}x(p,m),J(!0,n)}catch(m){console.error("Search error:",m),x(p,[]),J(!1,n)}finally{x(H,!1)}},300))};Pe(()=>{const a=()=>{x(z,!0),e(r)&&W(e(r),!0),e(f)&&W(e(f),!1)};window.pagefind?a():(document.addEventListener("pagefindready",a,{once:!0}),document.addEventListener("pagefindloaderror",a,{once:!0}))}),me(()=>(e(z),e(r)),()=>{e(z)&&(e(r)||e(r)==="")&&W(e(r),!0)}),me(()=>(e(z),e(f)),()=>{e(z)&&(e(f)||e(f)==="")&&W(e(f),!1)}),Le(),Te();var ce=Ke(),O=N(ce),de=o(O);j(de,{icon:"material-symbols:search",class:"absolute text-[1.25rem] pointer-events-none ml-3 transition my-auto text-black/30 dark:text-white/30"});var F=b(de,2);pe(F),l(O);var K=b(O,2),_e=o(K);j(_e,{icon:"material-symbols:search",class:"text-[1.25rem]"}),l(K);var ve=b(K,2),Q=o(ve),fe=o(Q);j(fe,{icon:"material-symbols:search",class:"absolute text-[1.25rem] pointer-events-none ml-3 transition my-auto text-black/30 dark:text-white/30"});var X=b(fe,2);pe(X),l(Q);var ye=b(Q,2);{var we=a=>{var n=Me(),m=o(n,!0);l(n),S(M=>B(m,M),[()=>(s(d),s(c),i(()=>d(c.searchLoading)))]),g(a,n)},ke=a=>{var n=ie(),m=N(n);{var M=E=>{var V=je(),Y=N(V);Re(Y,1,()=>(e(p),i(()=>e(p).slice(0,5))),Be,(h,t)=>{var u=Ne(),_=o(u),I=o(_);ne(I,()=>(e(t),i(()=>e(t).meta.title)));var y=b(I,2);j(y,{icon:"fa6-solid:chevron-right",class:"transition text-[0.75rem] translate-x-1 my-auto text-[var(--primary)]"}),l(_);var R=b(_,2);{var ee=w=>{var P=Ve(),T=o(P),te=o(T,!0);l(T);var C=b(T,2),ae=o(C);ne(ae,()=>(e(t),i(()=>e(t).excerpt))),l(C),l(P),S(re=>B(te,re),[()=>(s(d),s(c),i(()=>d(c.searchSummary)))]),g(w,P)};L(R,w=>{e(t),i(()=>e(t).excerpt.includes("<mark>"))&&w(ee)})}var Ie=b(R,2);{var Se=w=>{var P=Ce(),T=o(P),te=o(T,!0);l(T);var C=b(T,2),ae=o(C);ne(ae,()=>(e(t),i(()=>e(t).content))),l(C),l(P),S(re=>B(te,re),[()=>(s(d),s(c),i(()=>d(c.searchContent)))]),g(w,P)};L(Ie,w=>{e(t),i(()=>e(t).content&&e(t).content.includes("<mark>"))&&w(Se)})}l(u),S(()=>A(u,"href",(e(t),i(()=>e(t).url)))),G("click",u,w=>le(w,e(t).url)),g(h,u)});var D=b(Y,2);{var $=h=>{var t=Ue(),u=o(t),_=o(u),I=b(_);j(I,{icon:"fa6-solid:arrow-right",class:"transition text-[0.75rem] ml-1"}),l(u),l(t),S((y,R)=>{A(t,"href",y),B(_,`${R??""} `)},[()=>(s(se),e(r),e(f),i(()=>se(e(r)||e(f)))),()=>(s(d),s(c),e(p),i(()=>d(c.searchViewMore).replace("{count}",(e(p).length-5).toString())))]),G("click",t,y=>le(y,se(e(r)||e(f)))),g(h,t)};L(D,h=>{e(p),i(()=>e(p).length>5)&&h($)})}g(E,V)},Z=E=>{var V=ie(),Y=N(V);{var D=h=>{var t=qe(),u=o(t,!0);l(t),S(_=>B(u,_),[()=>(s(d),s(c),i(()=>d(c.searchNoResults)))]),g(h,t)},$=h=>{var t=ie(),u=N(t);{var _=I=>{var y=Fe(),R=o(y,!0);l(y),S(ee=>B(R,ee),[()=>(s(d),s(c),i(()=>d(c.searchTypeSomething)))]),g(I,y)};L(u,I=>{(e(r)||e(f))&&I(_)},!0)}g(h,t)};L(Y,h=>{e(p),i(()=>e(p).length===0)?h(D):h($,!1)},!0)}g(E,V)};L(m,E=>{e(p),i(()=>e(p).length>0)?E(M):E(Z,!1)},!0)}g(a,n)};L(ye,a=>{e(H)?a(we):a(ke,!1)})}l(ve),S((a,n)=>{A(F,"placeholder",a),A(X,"placeholder",n)},[()=>(s(d),s(c),i(()=>d(c.search))),()=>(s(d),s(c),i(()=>d(c.search)))]),he(F,()=>e(r),a=>x(r,a)),G("focus",F,()=>W(e(r),!0)),G("click",K,be),he(X,()=>e(f),a=>x(f,a)),g(v,ce),ze()}export{rt as default};
